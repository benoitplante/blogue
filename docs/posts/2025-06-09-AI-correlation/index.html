<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.31">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Ben Plante">
<meta name="dcterms.date" content="2025-06-09">
<meta name="description" content="Blogue sur les liens entre psychologie et intelligence artificielle">

<title>L’IA peut-elle mieux prédire les corrélations en personnalité que les experts ? – Benoit Plante</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-e1a5c8363afafaef2c763b6775fbf3ca.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-6957ec2732917c3acd9217c3064faa9e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id="></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', '', { 'anonymize_ip': true});
</script>


<!-- 

Load Academicons v1: https://jpswalsh.github.io/academicons/

-->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">



<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">





<!---

The following code are needed to show dimension citation and altmetrics.

https://api.altmetric.com/embeds.html

https://badge.dimensions.ai/

--->



<script type="text/javascript" src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script>



<script async="" src="https://badge.dimensions.ai/badge.js" charset="utf-8"></script>



<script type="text/javascript" src="//cdn.plu.mx/widget-popup.js"></script>


<link rel="stylesheet" href="../../styles.css">
<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="L’IA peut-elle mieux prédire les corrélations en personnalité que les experts ? – Benoit Plante">
<meta property="og:description" content="Réflexions, cas d’usage et outils à l’interface entre IA et psychologie">
<meta property="og:image" content="https://benoitplante.github.io/posts/2025-06-09-AI-correlation/banner.png">
<meta property="og:site_name" content="Benoit Plante">
<meta property="og:image:height" content="1024">
<meta property="og:image:width" content="1536">
<meta name="twitter:title" content="L’IA peut-elle mieux prédire les corrélations en personnalité que les experts ? – Benoit Plante">
<meta name="twitter:description" content="Réflexions, cas d’usage et outils à l’interface entre IA et psychologie">
<meta name="twitter:image" content="https://benoitplante.github.io/posts/2025-06-09-AI-correlation/banner.png">
<meta name="twitter:image-height" content="1024">
<meta name="twitter:image-width" content="1536">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Benoit Plante</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Accueil</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">À propos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">IA &amp; Sciences humaines</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../outils.html"> 
<span class="menu-text">Outils IA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../publications.html"> 
<span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching.html"> 
<span class="menu-text">Enseignement</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">L’IA peut-elle mieux prédire les corrélations en personnalité que les experts ?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Méthodologie augmentée par l’IA</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 9, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">1. Introduction</a></li>
  <li><a href="#concepts-de-base" id="toc-concepts-de-base" class="nav-link" data-scroll-target="#concepts-de-base">2. Concepts de base</a></li>
  <li><a href="#contexte-technologique" id="toc-contexte-technologique" class="nav-link" data-scroll-target="#contexte-technologique">3. Contexte technologique</a></li>
  <li><a href="#démarche-de-létude" id="toc-démarche-de-létude" class="nav-link" data-scroll-target="#démarche-de-létude">4. Démarche de l’étude</a></li>
  <li><a href="#résultats" id="toc-résultats" class="nav-link" data-scroll-target="#résultats">5. Résultats</a></li>
  <li><a href="#portée-et-utilité" id="toc-portée-et-utilité" class="nav-link" data-scroll-target="#portée-et-utilité">6. Portée et utilité</a></li>
  <li><a href="#limites-et-perspectives" id="toc-limites-et-perspectives" class="nav-link" data-scroll-target="#limites-et-perspectives">7. Limites et perspectives</a></li>
  <li><a href="#conclusion-personnelle" id="toc-conclusion-personnelle" class="nav-link" data-scroll-target="#conclusion-personnelle">8. Conclusion personnelle</a></li>
  <li><a href="#référence-complète" id="toc-référence-complète" class="nav-link" data-scroll-target="#référence-complète">9. Référence complète</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p><strong>En bref</strong>: Une étude récente montre que les grands modèles de langage (LLMs) et les systèmes spécialisés peuvent surpasser les humains – y compris les experts en psychologie – dans la prédiction des corrélations entre items de questionnaires de personnalité. Ces résultats soulèvent des questions importantes pour la recherche psychométrique, les pratiques d’évaluation et les usages futurs de l’IA en psychologie. Ils suggèrent également de nouvelles avenues pour l’intégration de l’IA dans le processus scientifique, notamment dans les phases exploratoires de formulation d’hypothèses.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="banner.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>Générée par ChatGPT</figcaption>
</figure>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">1. Introduction</h2>
<p>Dans l’évaluation psychologique, la corrélation entre les items d’un questionnaire est une information clé pour comprendre les traits de personnalité, construire des échelles valides et tester des hypothèses. C’est une pratique courante dans le développement d’instruments psychométriques, qui permet de vérifier si plusieurs énoncés mesurent bien un même construit psychologique.</p>
<p>Mais que se passerait-il si des modèles d’intelligence artificielle, sans vécu ni subjectivité humaine, étaient capables de mieux prédire ces corrélations que nous ? Peut-on réellement remplacer, ou du moins égaler, l’intuition experte d’un chercheur en psychologie avec une machine ?</p>
<p>C’est la question qu’ont explorée Philipp Schoenegger et ses collègues (2025) en comparant la performance de différents systèmes d’IA, d’étudiants gradués et de professeurs en psychologie, ainsi que de non-experts dans une tâche de prédiction de corrélations entre items de personnalité. Leurs résultats bousculent certaines idées reçues sur les limites actuelles de l’intelligence artificielle dans les sciences humaines.</p>
</section>
<section id="concepts-de-base" class="level2">
<h2 class="anchored" data-anchor-id="concepts-de-base">2. Concepts de base</h2>
<p>L’étude repose sur un concept central en psychométrie : <strong>la corrélation entre items</strong>, c’est-à-dire le degré de relation entre les réponses données à deux énoncés différents d’un questionnaire (par exemple : « Je suis souvent anxieux » et « Je me fais du souci pour des détails »). Plus la corrélation est forte, plus ces items ont de chances de mesurer un aspect commun de la personnalité.</p>
<p>Ces corrélations permettent non seulement de construire des échelles cohérentes et fiables, mais aussi de détecter des regroupements de traits (comme les Big Five ou la triade sombre), d’établir des profils psychologiques et d’analyser les interrelations entre différentes dimensions de la personnalité humaine. Elles jouent un rôle essentiel dans la validation d’outils, la modélisation de concepts et la formulation d’hypothèses empiriques.</p>
</section>
<section id="contexte-technologique" class="level2">
<h2 class="anchored" data-anchor-id="contexte-technologique">3. Contexte technologique</h2>
<p>Deux grandes catégories de modèles d’IA ont été testées :</p>
<ul>
<li><strong>Modèles généralistes</strong> : GPT-4o et Claude 3 Opus, deux modèles de langage de pointe capables de traiter du texte, de répondre à une vaste gamme de questions et de s’adapter à des domaines variés.</li>
<li><strong>Modèle spécialisé</strong> : <em>PersonalityMap</em>, un réseau de neurones profond entraîné spécifiquement sur un grand corpus de données psychométriques pour prédire les corrélations entre items de personnalité.</li>
</ul>
<p>Cette comparaison permet d’évaluer l’apport des systèmes généralistes, polyvalents mais non spécialisés, par rapport aux modèles conçus pour une tâche psychologique précise. Le défi est de déterminer si la puissance de généralisation des LLMs peut rivaliser avec l’optimisation ciblée d’un modèle comme PersonalityMap dans un domaine aussi nuancé que la psychologie des traits.</p>
</section>
<section id="démarche-de-létude" class="level2">
<h2 class="anchored" data-anchor-id="démarche-de-létude">4. Démarche de l’étude</h2>
<p>Les auteurs ont demandé à cinq groupes de produire des estimations de corrélations entre 249 paires d’items tirées de l’inventaire SAPA de personnalité :</p>
<ul>
<li>254 personnes non expertes (recrutées via Positly)</li>
<li>272 experts (doctorant·es, postdoctorant·es et professeur·es en psychologie)</li>
<li>Les modèles GPT-4o et Claude 3 Opus (3 prédictions chacune, à température 0)</li>
<li>Le modèle spécialisé PersonalityMap (1 prédiction par paire, déterministe)</li>
</ul>
<p>Les réponses humaines étaient saisies sur une échelle continue de -1 à +1. Une brève formation sur les corrélations était offerte aux participants. Les performances ont ensuite été comparées selon plusieurs indicateurs : erreur absolue moyenne (précision), corrélation avec les données empiriques (finesse relative) et capacité à classer les corrélations dans les bonnes catégories directionnelles (positives, nulles ou négatives).</p>
</section>
<section id="résultats" class="level2">
<h2 class="anchored" data-anchor-id="résultats">5. Résultats</h2>
<p>Les résultats sont impressionnants et sans équivoque :</p>
<ul>
<li><strong>PersonalityMap</strong> obtient l’erreur moyenne la plus faible (0.07), suivie de Claude 3 Opus (0.11), GPT-4o (0.14), les experts (0.20) et les non-experts (0.29).</li>
<li>Dans 99 % des comparaisons individuelles, PersonalityMap prédit mieux que les experts humains.</li>
<li>Lorsqu’on regroupe les réponses humaines (effet de foule), les experts égalent la performance du modèle spécialisé, soulignant l’intérêt des prédictions collectives.</li>
<li>Les modèles généralistes surpassent la majorité des individus, experts inclus, dans les prédictions non agrégées.</li>
</ul>
<p>Les auteurs notent que l’avantage des IA tient notamment à leur calibration : elles prédisent des magnitudes proches des véritables corrélations observées, tandis que les humains tendent à surestimer ou sous-estimer les relations. Toutefois, les experts conservent un léger avantage pour identifier la direction (positive ou négative) des relations entre items.</p>
</section>
<section id="portée-et-utilité" class="level2">
<h2 class="anchored" data-anchor-id="portée-et-utilité">6. Portée et utilité</h2>
<p>Ces résultats sont prometteurs pour plusieurs champs :</p>
<ul>
<li><strong>La recherche psychométrique</strong> : tester des hypothèses rapidement, construire ou affiner des instruments, détecter des regroupements d’items pertinents.</li>
<li><strong>Les pratiques appliquées</strong> : pré-identifier des relations utiles entre comportements ou traits, sans recourir à de vastes échantillons, en particulier dans des contextes cliniques ou organisationnels.</li>
<li><strong>Le développement d’outils</strong> : concevoir des systèmes d’assistance à la modélisation de questionnaires, à la génération d’items ou à la simulation d’effets, avec des cycles d’itération rapides.</li>
</ul>
<p>L’étude suggère même que ces modèles pourraient servir de « tubes à essai numériques » pour la recherche en psychologie, permettant d’explorer des hypothèses à bas coût avant la collecte de données réelles.</p>
</section>
<section id="limites-et-perspectives" class="level2">
<h2 class="anchored" data-anchor-id="limites-et-perspectives">7. Limites et perspectives</h2>
<p>L’étude présente plusieurs limites importantes :</p>
<ul>
<li>Le jeu de données repose uniquement sur l’inventaire SAPA, composé d’items auto-rapportés et d’un seul format (cross-sectionnel).</li>
<li>Les performances des LLMs pourraient être biaisées si les données utilisées pour évaluer les modèles faisaient partie de leur corpus d’entraînement.</li>
<li>Les modèles prédisent uniquement des corrélations linéaires et ne permettent pas d’inférence causale, ce qui limite leur usage dans les analyses avancées.</li>
</ul>
<p>Les auteurs recommandent aussi d’évaluer la performance sur d’autres types d’items, d’estimer l’incertitude associée aux prédictions, et d’explorer des relations non linéaires ou modérées. Enfin, la question éthique de l’usage de ces systèmes dans des contextes appliqués reste ouverte.</p>
</section>
<section id="conclusion-personnelle" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-personnelle">8. Conclusion personnelle</h2>
<p>Cette étude marque un tournant pour la psychologie computationnelle. Elle montre que l’IA ne se contente plus de simuler la personnalité ou d’inférer des traits à partir de textes : elle peut désormais prédire finement la structure des relations entre items psychométriques. Ce résultat ouvre la porte à une nouvelle génération d’outils psychométriques assistés par IA.</p>
<p>Mais il pose aussi une question fondamentale : voulons-nous confier à des algorithmes le pouvoir de prédire, voire de diagnostiquer, nos traits les plus intimes ? Une réflexion éthique, méthodologique et épistémologique s’impose. Il faudra aussi penser à la complémentarité entre expertise humaine et intelligence computationnelle, plutôt qu’à leur substitution pure et simple.</p>
</section>
<section id="référence-complète" class="level2">
<h2 class="anchored" data-anchor-id="référence-complète">9. Référence complète</h2>
<p>Schoenegger, P., Greenberg, S., Grishin, A., Lewis, J., &amp; Caviola, L. (2025). AI can outperform humans in predicting correlations between personality items. <em>Communications Psychology, 3</em>(23). <a href="https://doi.org/10.1038/s44271-025-00205-w">https://doi.org/10.1038/s44271-025-00205-w</a></p>
<!-- Formulaire d’abonnement Brevo -->
<iframe width="540" height="405" scrolling="no" src="https://sibforms.com/serve/MUIFAJuXpDvH14nAsFXhXmM7v_z4nHcpDJCxRYobbS4dO7G-ovnmEkzoaPhHHEKEPAWRf3EVMvbOumRBiEsM6A50GTewyamCczEPOkwY9jSzdOIhDlnGvyrZJq7_DnhQswAXMCQ4QhEhVv0wZoQ_S-DisWk4a4YeHj6TW3XrELrEZPr4Nv-e2EJt60iSgcFerHiFJzCrIkdm7njy" frameborder="0" allowfullscreen="" style="display: block;margin-left: auto;margin-right: auto;max-width: 100%;">
</iframe>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/benoitplante\.github\.io");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<a href="https://github.com/benplante">Ben Plante</a> ©
<script>document.write(new Date().getFullYear())</script>
</div>   
    <div class="nav-footer-center">
<p>Blogue propulsé par <a href="https://quarto.org">Quarto</a></p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/benplante" target="_blank">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="../../posts.xml" target="_blank">
      <i class="bi bi-rss" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>